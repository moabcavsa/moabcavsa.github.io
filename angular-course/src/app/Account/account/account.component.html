<div class="row">
  <div class="col">
    <div
      ngbDropdown
      #FormDrop="ngbDropdown"
      #myDrop="ngbDropdown"
      class="d-inline-block"
    >
      <button
        type="button"
        class="btn btn-outline-secondary me-2"
        placement="bottom"
        ngbTooltip="Login/Register"
        ngbDropdownToggle
      >
        <i class="bi bi-person-circle"></i>
      </button>
      <div ngbDropdownMenu aria-labelledby="dropdownForm1">
        <div>
          <form
            class="px-4 py-3"
            (ngSubmit)="send()"
            [formGroup]="formGroup"
            [ngStyle]="IsVisibleLogin()"
          >
            <div class="mb-3">
              <label for="exampleDropdownFormEmail1">Email address</label>
              <input
                formControlName="email"
                type="email"
                class="form-control"
                id="exampleDropdownFormEmail1"
                placeholder="email@example.com"
                autocomplete="username"
              />
            </div>
            <div class="mb-3">
              <label for="exampleDropdownFormPassword1">Password</label>
              <input
                formControlName="password"
                type="password"
                class="form-control"
                id="exampleDropdownFormPassword1"
                placeholder="Password"
                autocomplete="current-password"
              />
            </div>
            <div class="form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="dropdownCheck"
              />
              <label class="form-check-label" for="dropdownCheck">
                Remember me
              </label>
            </div>
            <button
              [disabled]="!formGroup.valid"
              type="submit"
              class="btn btn-primary"
              (click)="ExecuteLogin()"
            >
              Sign in
            </button>
          </form>
          <div *ngIf="!this.formGroup.valid">
            <alert-template
              [alertType]="'danger'"
              [datasource]="'campi non validi'"
            ></alert-template>
          </div>
        </div>
        <div>
          <div class="dropdown-divider"></div>
          <button
            type="button"
            ngbDropdownItem
            [routerLink]="['showUser']"
            href="javascript:void()"
          >
            New around here? Sign up
          </button>
          <button type="button" ngbDropdownItem (click)="ExecuteEmails()">
            Forgot password?
          </button>
        </div>
      </div>
    </div>
    <button
      [ngStyle]="IsVisibleLogout()"
      (click)="OpenPopup(popuptemplate)"
      type="button"
      class="btn btn-outline-secondary me-2"
      placement="bottom"
      ngbTooltip="Logout"
    >
      <i class="bi bi-box-arrow-right"></i>
    </button>
  </div>
</div>

<ng-template #popuptemplate let-modal>
  <popup-template
    [datasource]="'Sei sicuro di voler chiudere la sessione?  '"
    [modal]="modal"
  >
  </popup-template>
</ng-template>

<ng-template #popupTemplateAlert let-modal>
  <alert-template-popup
    [datasource]="'Sessione scaduta/chiusa'"
    [alertType]="'danger'"
    [modal]="modal"
  >
  </alert-template-popup>
</ng-template>
